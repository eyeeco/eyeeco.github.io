<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>[后台开发工程师总结系列] 9.Python，Nginx and Django | MapleStory</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="后台开发">
  
  
  
  
  <meta name="description" content="pythonPEP8规范 每一行使用四个空格 每一行限制最大字符数为79 推荐从( [ 换行, 与上一行的第一个(错一个字符。 顶层函数和类定义换两行， 类里的方法一个换行 命名、空格规则">
<meta name="keywords" content="后台开发">
<meta property="og:type" content="article">
<meta property="og:title" content="[后台开发工程师总结系列] 9.Python，Nginx and Django">
<meta property="og:url" content="http://yoursite.com/2019/03/09/后台开发工程师总结系列-9-Python，Nginx-and-Django/index.html">
<meta property="og:site_name" content="MapleStory">
<meta property="og:description" content="pythonPEP8规范 每一行使用四个空格 每一行限制最大字符数为79 推荐从( [ 换行, 与上一行的第一个(错一个字符。 顶层函数和类定义换两行， 类里的方法一个换行 命名、空格规则">
<meta property="og:locale" content="zh-cn">
<meta property="og:image" content="http://yoursite.com/2019/03/09/后台开发工程师总结系列-9-Python，Nginx-and-Django/1551613825717.png">
<meta property="og:image" content="http://yoursite.com/2019/03/09/后台开发工程师总结系列-9-Python，Nginx-and-Django/1551613956066.png">
<meta property="og:image" content="http://yoursite.com/2019/03/09/后台开发工程师总结系列-9-Python，Nginx-and-Django/1551615657054.png">
<meta property="og:updated_time" content="2019-03-09T09:16:28.843Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="[后台开发工程师总结系列] 9.Python，Nginx and Django">
<meta name="twitter:description" content="pythonPEP8规范 每一行使用四个空格 每一行限制最大字符数为79 推荐从( [ 换行, 与上一行的第一个(错一个字符。 顶层函数和类定义换两行， 类里的方法一个换行 命名、空格规则">
<meta name="twitter:image" content="http://yoursite.com/2019/03/09/后台开发工程师总结系列-9-Python，Nginx-and-Django/1551613825717.png">
  
  <link rel="icon" href="/css/images/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">

  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Oswald%3A300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/css/style.css">

  <script src="/js/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css">
  <link rel="stylesheet" href="/css/fashion.css">
  <link rel="stylesheet" href="/css/glyphs.css">

</head>
</html>


  <body data-spy="scroll" data-target="#toc" data-offset="50">


  


<header id="allheader" class="site-header" role="banner">
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" title="MapleStory" rel="home"> MapleStory </a>
            
          </h1>
          
          
            <div class="site-description">CS:Dalian University of technology</div>
          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>

            <div class="clearfix sf-menu">
              <ul id="main-nav" class="menu sf-js-enabled sf-arrows" style="touch-action: pan-y;">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/">Home</a> </li>
                    
              </ul>
            </div>
          </nav>

      </div>
  </div>
</header>


  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-后台开发工程师总结系列-9-Python，Nginx-and-Django" style="width: 66%; float:left;" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      [后台开发工程师总结系列] 9.Python，Nginx and Django
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2019/03/09/后台开发工程师总结系列-9-Python，Nginx-and-Django/" class="article-date">
	  <time datetime="2019-03-09T09:11:04.000Z" itemprop="datePublished">三月 9, 2019</time>
	</a>

       
      
	<span id="busuanzi_container_page_pv">
	  本文总阅读量<span id="busuanzi_value_page_pv"></span>次
	</span>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="python"><a href="#python" class="headerlink" title="python"></a>python</h2><h4 id="PEP8规范"><a href="#PEP8规范" class="headerlink" title="PEP8规范"></a>PEP8规范</h4><ul>
<li>每一行使用四个空格</li>
<li>每一行限制最大字符数为79</li>
<li>推荐从( [ 换行, 与上一行的第一个(错一个字符。</li>
<li>顶层函数和类定义换两行， 类里的方法一个换行</li>
<li>命名、空格规则</li>
</ul>
<a id="more"></a>
<h4 id="如何理解Python"><a href="#如何理解Python" class="headerlink" title="如何理解Python"></a>如何理解Python</h4><ul>
<li>Python是一种解释性语言，与C语言及衍生语言不同，Python运行之前不需要编译</li>
<li>Python是动态类型的语言，声明变量时，不需要说明变量的类型。</li>
<li>非常适合面向对象编程(OOP)， 没有访问说明符</li>
<li>函数是第一类对象，可以被指定给变量，返回函数类型</li>
<li>Python代码编写块，但是运行慢。Python允许编写C语言的扩展以加快速度</li>
</ul>
<h4 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h4><ul>
<li>Pyhton迭代器与生成器</li>
</ul>
<p>迭代器是一个抽象的概念，任何对象，如果它有next方法和iter方法返回它本身</p>
<p>iter() 是Python的内置函数，iter()会返回一个定义了next()方法的迭代器对象，在容器中逐级的访问元素，next也是python的内置函数，没有后续元素时会抛异常</p>
<p>生成器是创建迭代器简单而强大的工具，他们写起来就像是其他的函数，只需要在返回数据时使用yeild语句。每次next调用时，他都会脱离当前的位置。</p>
<p>生成器能做迭代器做的所用事情，而且因为创建了<strong>iter</strong>() 和next 简介而高效</p>
<ul>
<li>装饰器的作用和功能</li>
</ul>
<p>引入日志</p>
<p>函数执行时间统计</p>
<p>执行函数前预备处理</p>
<p>执行函数后的清理功能</p>
<p>权限校验等场景</p>
<p>缓存</p>
<ul>
<li>GIL（Global INterpreter Lock 全局解释器锁）</li>
</ul>
<p>Python代码执行有Python虚拟机控制。Python在设计之初就考虑到在解释器中只有一个线程在执行，即任意时刻只有一个线程在解释器中运行。对Python虚拟机的访问由全局解释器锁来控制。</p>
<p>在多线程环境中，Python虚拟机按照如下方式运行</p>
<ol>
<li>设置GIL</li>
<li>切换到一个线程去运行</li>
<li>运行： 指定数量的字节码，线程主动让出控制</li>
<li>线程睡眠</li>
<li>解锁GIL</li>
<li>重复上述步骤</li>
</ol>
<ul>
<li>Python 的内存管理</li>
</ul>
<ol>
<li>垃圾回收：Python  不像C++ java 语言一样，不用事先声明变量而直接对变量进行赋值。对Python来讲，对象和内存都是在运行时确定的。这也是为什么Python被称为动态类型的原因（动态类型可以简单归结为对变量内存地址的分配是在运行时自动判断类型并赋值）。</li>
<li>引用计数：Pyhton采用了类似windows内核对象方式进行内存管理。每一个对象都有一个指针指向其引用计数。当变量绑定该对象时引用计数就是1</li>
<li>内存池机制：</li>
</ol>
<p>Python内存池以金字塔行</p>
<p>0层是 malloc 和free 操作</p>
<p>1、2层是内存池，对象小于256K时直接由该层分配内存</p>
<p>3层是最上层，对Pythton对象直接操作</p>
<h4 id="Python多继承（MRO）"><a href="#Python多继承（MRO）" class="headerlink" title="Python多继承（MRO）"></a>Python多继承（MRO）</h4><p>C3算法最早提出用于Lisp，应用到Python中是为了解决原来深度优先搜索不满足本地优先级、单调性的问题</p>
<p>本地优先级：声明父类时的顺序，C(A，B)，访问父类时应该根据声明顺序优先查找A类然后是B类</p>
<p>单调性：如果在C的解析顺序中，A在B前面，那C的所有子类都必须是这个顺序</p>
<p>经典的方法是深度优先搜索，而新方法（C3）是一种广度优先搜索的方法。</p>
<h4 id="gevent"><a href="#gevent" class="headerlink" title="gevent"></a>gevent</h4><p>为Python提供了较为全面的协程支持。</p>
<p>gevent 是第三方库，通过greenlet实现协程，基本思想是：</p>
<p>当一个greenlet 遇到IO操作时，比如访问网络，就会切换到其他的greenlet，等到IO操作完成时再切换回来执行。由于IO操作非常耗时，常常使程序处于等待状态，greenlet使得总有其在运行而不是等待IO</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> gevent <span class="keyword">import</span> monkey</span><br><span class="line"><span class="keyword">import</span> gevent</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">        print(gevent.getcurrent(), i)</span><br><span class="line">        </span><br><span class="line">g1 = gevent.spawn(f, <span class="number">5</span>)</span><br><span class="line">g2 = gevent.spawn(f, <span class="number">5</span>)</span><br><span class="line">g3 = gevent.spawn(f, <span class="number">5</span>)</span><br><span class="line">g1.join()</span><br><span class="line">g2.join()</span><br><span class="line">g2.join()</span><br></pre></td></tr></table></figure>
<h4 id="协程"><a href="#协程" class="headerlink" title="协程"></a>协程</h4><p>协程又称为微线程</p>
<p>协程的概念很早就出来了，但是近几年才得到广泛应用</p>
<p>由协程定义的过程可能会交替执行，有点像多线程，协程相比于多线程有以下优势</p>
<ol>
<li>协程有极高的执行效率，子进程切换不会引起线程切换，没有线程的切换开销</li>
<li>不需要多线程的锁机制，也不存在资源的写变量冲突，执行效率较高</li>
</ol>
<h4 id="is-和-的区别"><a href="#is-和-的区别" class="headerlink" title="is 和 == 的区别"></a>is 和 == 的区别</h4><p>Python中的值有三个基本的要素：id（身份表示）、type（数据类型）、value（值）</p>
<p>is和==都是比较判断，但是内容不同</p>
<p>is比较的是id， 而== 比较的是值</p>
<h4 id="xrange-和-range"><a href="#xrange-和-range" class="headerlink" title="xrange  和 range"></a>xrange  和 range</h4><p>range直接返回一个列表</p>
<p>xrange返回一个对象，显示调用list将其转换为一个列表</p>
<p>大数列的话xrange效率高不需要开辟较大的空间，内存空间使用较少</p>
<h4 id="Python元类"><a href="#Python元类" class="headerlink" title="Python元类"></a>Python元类</h4><p>元类是一个深奥的面向对象的概念，隐藏在激活所有的Python代码后</p>
<p>简单的说，元类就是用来创建类的东西。元类就是类的类</p>
<p>函数type实际上是一个元类。</p>
<p>MRO GIL GC </p>
<h2 id="Nginx-概述"><a href="#Nginx-概述" class="headerlink" title="Nginx 概述"></a>Nginx 概述</h2><p>Nginx是一个高性能的HTTP和反向代理服务器，以及电子邮件代理服务器</p>
<ul>
<li>跨平台、配置简单</li>
<li>非阻塞，高并发连接 如果作为web服务器 nginx能够支持高达50000的并发连接数</li>
<li>内存消耗小， 10个nginx才占用150M内存，</li>
<li>处理静态文件好，耗费内存少</li>
<li>一个master进程生成多个worker进程</li>
</ul>
<h4 id="nginx-的负载均衡算法"><a href="#nginx-的负载均衡算法" class="headerlink" title="nginx 的负载均衡算法"></a>nginx 的负载均衡算法</h4><p>nginx的upstream支持4种方式的分配</p>
<ol>
<li>轮询（默认）</li>
</ol>
<p>每个请求按照一定的时间顺序逐一分配到不同的后端服务器</p>
<ol>
<li>weight</li>
</ol>
<p>指定轮询的几率， 和访问比例呈正比，用于性能不均的情况。</p>
<p>默认深搜分配权重</p>
<ol>
<li>IP_HASH</li>
</ol>
<p>每个请求按照访问的ip地址进行hash分配，可以解决session问题</p>
<h4 id="Nginx如何解决惊群现象"><a href="#Nginx如何解决惊群现象" class="headerlink" title="Nginx如何解决惊群现象"></a>Nginx如何解决惊群现象</h4><p>惊群是指多个子进程在同一时刻监听同一端口引起的</p>
<p>nginx解决方案：同一时刻只能由唯一一个worker 监听web端口，新事件连接只能唤醒唯一监听端口的子进程。</p>
<h4 id="nginx-事件驱动框架"><a href="#nginx-事件驱动框架" class="headerlink" title="nginx 事件驱动框架"></a>nginx 事件驱动框架</h4><p>nginx 时间驱动架构：所谓事件驱动架构，由一些事情发生源来产生事件，由一个或多个时间收集器来收集事件（epolld）分发事件，许多时间处理器会主持自己感兴趣的事件，同时会消费这些事件。</p>
<p>传统的web服务器事件局限于TCP连接上，其它时间驱动都不是事件驱动。即前者每一个消费者独占一个进程资源，而后者只是时间分发者短期占用进程。</p>
<h4 id="Nginx的多进程模型"><a href="#Nginx的多进程模型" class="headerlink" title="Nginx的多进程模型"></a>Nginx的多进程模型</h4><p>Apache 创建多个进程或线程，每个进程、线程都会分配CPU，容易榨干服务器资源</p>
<p>nginx 单线程来异步非阻塞的处理请求（可以配置工作进程数量）</p>
<h4 id="Nginx处理请求"><a href="#Nginx处理请求" class="headerlink" title="Nginx处理请求"></a>Nginx处理请求</h4><p>首先nginx启动时，解析配置文件得到端口与IP地址，然后在master进程中初始化好这个监控的socket并listen</p>
<p>之后master进程fork出多个子进程出来（worker）子进程会竞争accpet连接</p>
<p>此时客户端就可以发起连接，当客户端与nginx三次握手后与nginx建立好连接。某个子进程会accept成功，创建对nginx连接的封装，即ngx_connection_t 结构体。</p>
<p>接着，根据事件调用相应的处理模块，如HTTP进行交换。</p>
<p>最后Nginx或客户端关闭连接。</p>
<h4 id="正向代理"><a href="#正向代理" class="headerlink" title="正向代理"></a>正向代理</h4><p>一个位于客户端和原始服务器之间的服务器，为了从原始服务器获得内容，客户端向代理发送一个请求并制定目标（原始服务器），然后代理服务器向原始服务器请求并返回内容给客户端。</p>
<p>正向代理服务器代理的是 客户端</p>
<h4 id="反向代理"><a href="#反向代理" class="headerlink" title="反向代理"></a>反向代理</h4><p>代理服务器接受Internet的连接请求，然后将请求分发给内网上的服务器。并将从服务器上得到的结果返回给客户端，这个服务器对外表现为一个反向代理服务器。</p>
<p>反向代理代理的是 服务端</p>
<h4 id="动静分离"><a href="#动静分离" class="headerlink" title="动静分离"></a>动静分离</h4><p>软件开发中，有些资源需要后台处理(.jsp do)，有些不需要（css、html），不需要经过后台处理的是静态文件，静态、动态资源分离可以进行静态文件的缓存。</p>
<h4 id="Nginx-和-Apache"><a href="#Nginx-和-Apache" class="headerlink" title="Nginx 和 Apache"></a>Nginx 和 Apache</h4><h2 id="django"><a href="#django" class="headerlink" title="django"></a>django</h2><h4 id="对Django-的认识"><a href="#对Django-的认识" class="headerlink" title="对Django 的认识"></a>对Django 的认识</h4><p>Django是走大而全的方向，它是出名的自动化管理后台，只需要使用ORM，简单的对象定义，自动生成数据库结构，全功能的管理后台。</p>
<p>Django内置了一个ORM框架，与其其他模块耦合性较高，理论上必须使用该框架</p>
<p>Django 的最大优势是开发效率高，django项目达到一定规模后需要重构才能满足性能需求</p>
<p>适用于中小型网站、或大型网站的雏形</p>
<p>Django模板设计哲学是彻底将代码、样式分离</p>
<h4 id="MVC-模型和MTV模式"><a href="#MVC-模型和MTV模式" class="headerlink" title="MVC 模型和MTV模式"></a>MVC 模型和MTV模式</h4><p>所谓MVC就是把应用分为模型、控制器、视图三层，以插件式、松耦合的方式放在一起，模型负责对象与数据库的映射（ORM）视图负责与用户的交互（页面）控制器接受用户调入模型和视图完成用户请求</p>
<p><img src="/2019/03/09/后台开发工程师总结系列-9-Python，Nginx-and-Django/1551613825717.png" alt="1551613825717"></p>
<p>而Django的MTV模式本质上和MVC是一样的，知识定义有些序不同</p>
<ol>
<li>M代表模型；负责业务对象和数据的关系映射（ORM）</li>
<li>T代表模板：负责如何把页面展示给用户</li>
<li>V代表视图：负责业务逻辑，并调用model和Template</li>
<li><img src="/2019/03/09/后台开发工程师总结系列-9-Python，Nginx-and-Django/1551613956066.png" alt="1551613956066"></li>
</ol>
<h4 id="简述Django的请求生命周期"><a href="#简述Django的请求生命周期" class="headerlink" title="简述Django的请求生命周期"></a>简述Django的请求生命周期</h4><p>一般用户通过浏览器发送请求，这个请求访问视图函数，视图函数调用模型，模型去数据库查找数据，然后逐级返回，在填充到模板最后返回给用户</p>
<ul>
<li>wsgi 请求封装候交给web框架（flask django）</li>
<li>中间件，对请求进行验校活在请求中添加相关数据，如（csrf， session）</li>
<li>路由匹配，根据浏览器发送的不同URL去匹配不同的函数</li>
<li>视图函数 视图函数中进行业务处理，可能涉及到（ORM 和模板渲染）</li>
<li>中间件，对响应函数进行处理</li>
<li>wsgi 将响应内容发给浏览器</li>
</ul>
<h4 id="什么是FBV和CBV"><a href="#什么是FBV和CBV" class="headerlink" title="什么是FBV和CBV"></a>什么是FBV和CBV</h4><p>function based views 视图函数中使用函数处理</p>
<p>class based views 视图函数使用类处理请求</p>
<h4 id="谈谈对ORM的理解"><a href="#谈谈对ORM的理解" class="headerlink" title="谈谈对ORM的理解"></a>谈谈对ORM的理解</h4><p>ORM是对象关系映射，是MVC框架的一个重要部分。它实现了数据模型与数据的解耦，即数据模型的设计不依赖特定的数据库，通过简单的配置就可以更换数据库，极大地减轻了开发人员的工作量。</p>
<h4 id="谈谈对restful的理解"><a href="#谈谈对restful的理解" class="headerlink" title="谈谈对restful的理解"></a>谈谈对restful的理解</h4><p>restful 其实就是一套编写接口的协议，协议规定如何编写及如何设置返回值，状态信息码等。</p>
<p>其实原理和django的CBV类似，便于前后端分离。</p>
<p>提供了许多方便的组件， </p>
<p>序列化器：用户请求验校+queryset 对象序列化为json</p>
<p>解析器：获取用户请求数据 request.data</p>
<p>分页： 从数据库中获取到的数据在页面进行分页展示</p>
<p>认证、权限、访问频率控制</p>
<h4 id="中间件"><a href="#中间件" class="headerlink" title="中间件"></a>中间件</h4><p>中间件是用来处理Django用来处理请求和相应框架级别的钩子，它是一个轻量，低级别的插件系统，用于在全局范围改变Django的输入和输出，每个中间件负责一些特定功能。</p>
<p><img src="/2019/03/09/后台开发工程师总结系列-9-Python，Nginx-and-Django/1551615657054.png" alt="1551615657054"></p>
<p>中间件会拦截一部分请求，比如验证session，没有登录的进行跳转。</p>
<h4 id="Django中的一些重要语句"><a href="#Django中的一些重要语句" class="headerlink" title="Django中的一些重要语句"></a>Django中的一些重要语句</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 原生SQL语句</span></span><br><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> connection</span><br><span class="line"></span><br><span class="line">cursor = connection.cursor()</span><br><span class="line">cursor.execute(<span class="string">"select * from auth_user"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Django ORM批量创建数据</span></span><br><span class="line">querysetlist = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> res:</span><br><span class="line">    querysetlist.append(Account(name=i))</span><br><span class="line">Account.objects.bulk_create(querylist)</span><br></pre></td></tr></table></figure>
<h4 id="Django-查询的特性"><a href="#Django-查询的特性" class="headerlink" title="Django 查询的特性"></a>Django 查询的特性</h4><ul>
<li>惰性执行、缓存</li>
<li>创建查询集不会访问数据库，直到使用数据时才会访问数据库，调用数据的情况包括迭代、序列化、与if合用</li>
</ul>
<h4 id="什么是wsgi、uwsgi、uWSGI"><a href="#什么是wsgi、uwsgi、uWSGI" class="headerlink" title="什么是wsgi、uwsgi、uWSGI"></a>什么是wsgi、uwsgi、uWSGI</h4><p>WSGI： web服务器的网关接口，是一套协议，用于接受用户请求并进行初次封装，然后交给web服务器</p>
<p>实现wsgi协议的模块：</p>
<ol>
<li>wsgiref 本质上是一个socket服务器，用于接受用户请求（django）</li>
<li>werkzeug 本质上是一个socket服务器，用于接受用户请求（flask）</li>
</ol>
<p>而uwsgi 也是一种通信协议</p>
<p>uWSGI是一个web服务器，实现了上述协议</p>
<h4 id="Django-中的csrf-（防止跨域请求伪造）实现机制"><a href="#Django-中的csrf-（防止跨域请求伪造）实现机制" class="headerlink" title="Django 中的csrf （防止跨域请求伪造）实现机制"></a>Django 中的csrf （防止跨域请求伪造）实现机制</h4><p>第一步： Django 第一次相应客户端请求时，随机产生一个token，把这个token保存在session中，同时把其发送给前端</p>
<p>第二步：下次前端发起请求（比如发帖时）把这个token带入请求头中一起传给后端cokie:(csrftoken:…)</p>
<p>第三步：后端检验前端传入的token与session是否一致</p>
<h4 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h4><p>Ajax（Asynchronous javascript and xml）能够局部刷新网页数据，而不是重新加载</p>
<p>第一步：创建xmlhettprequest对象，val xmlhttp = new XMLHttpRequest()</p>
<p>第二步：使用xml对象的open和send方法发送资源请求给服务器</p>
<p>第三步：使用xml对象的responstest 和 response XML 获得服务器的响应</p>
<p>第四步：onreadystagechange </p>
<p>Ajax是一种快速创建动态网页的技术</p>
<p>通过在后台与服务器进行少量的服务交换，AJAX可以实现异步更新。这意外着它不需要重新加载整个网页的情况下对网页的某部分进行更新。</p>
<p>传统的网页如果更新内容必须重新加载整个页面</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadXML</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> xmlhttp;</span><br><span class="line">    <span class="keyword">if</span>(windows.XMLHttpRequset)&#123;</span><br><span class="line">        xmlhttp = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    &#125;</span><br><span class="line">    xmlhttp.onreadystatechange=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(xmlhttp.readyState==<span class="number">4</span> &amp;&amp; xmlhttp.states==<span class="number">200</span>)&#123;</span><br><span class="line">            <span class="built_in">document</span>.getElementById(<span class="string">"MyDiv"</span>).innerHTML = xmlhttp.responseText;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    xml.open(<span class="string">"GET"</span>, <span class="string">"/something"</span>, <span class="literal">true</span>);</span><br><span class="line">    xmlhtthp.send();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/后台开发/">后台开发</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/03/09/后台开发工程师总结系列-10-常用算法及参考实现/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          [后台开发工程师总结系列] 10. 常用算法及参考实现
        
      </div>
    </a>
  
  
    <a href="/2019/03/09/后台开发工程师总结系列-8-STL概论/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">[后台开发工程师总结系列] 8.STL概论</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">Contents</strong>
    
      <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#python"><span class="nav-number">1.</span> <span class="nav-text">python</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#PEP8规范"><span class="nav-number">1.0.1.</span> <span class="nav-text">PEP8规范</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#如何理解Python"><span class="nav-number">1.0.2.</span> <span class="nav-text">如何理解Python</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Python"><span class="nav-number">1.0.3.</span> <span class="nav-text">Python</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Python多继承（MRO）"><span class="nav-number">1.0.4.</span> <span class="nav-text">Python多继承（MRO）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#gevent"><span class="nav-number">1.0.5.</span> <span class="nav-text">gevent</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#协程"><span class="nav-number">1.0.6.</span> <span class="nav-text">协程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#is-和-的区别"><span class="nav-number">1.0.7.</span> <span class="nav-text">is 和 == 的区别</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#xrange-和-range"><span class="nav-number">1.0.8.</span> <span class="nav-text">xrange  和 range</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Python元类"><span class="nav-number">1.0.9.</span> <span class="nav-text">Python元类</span></a></li></ol></li></ol><li class="nav-item nav-level-2"><a class="nav-link" href="#Nginx-概述"><span class="nav-number">2.</span> <span class="nav-text">Nginx 概述</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#nginx-的负载均衡算法"><span class="nav-number">2.0.1.</span> <span class="nav-text">nginx 的负载均衡算法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Nginx如何解决惊群现象"><span class="nav-number">2.0.2.</span> <span class="nav-text">Nginx如何解决惊群现象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#nginx-事件驱动框架"><span class="nav-number">2.0.3.</span> <span class="nav-text">nginx 事件驱动框架</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Nginx的多进程模型"><span class="nav-number">2.0.4.</span> <span class="nav-text">Nginx的多进程模型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Nginx处理请求"><span class="nav-number">2.0.5.</span> <span class="nav-text">Nginx处理请求</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#正向代理"><span class="nav-number">2.0.6.</span> <span class="nav-text">正向代理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#反向代理"><span class="nav-number">2.0.7.</span> <span class="nav-text">反向代理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#动静分离"><span class="nav-number">2.0.8.</span> <span class="nav-text">动静分离</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Nginx-和-Apache"><span class="nav-number">2.0.9.</span> <span class="nav-text">Nginx 和 Apache</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#django"><span class="nav-number">3.</span> <span class="nav-text">django</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#对Django-的认识"><span class="nav-number">3.0.1.</span> <span class="nav-text">对Django 的认识</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#MVC-模型和MTV模式"><span class="nav-number">3.0.2.</span> <span class="nav-text">MVC 模型和MTV模式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#简述Django的请求生命周期"><span class="nav-number">3.0.3.</span> <span class="nav-text">简述Django的请求生命周期</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#什么是FBV和CBV"><span class="nav-number">3.0.4.</span> <span class="nav-text">什么是FBV和CBV</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#谈谈对ORM的理解"><span class="nav-number">3.0.5.</span> <span class="nav-text">谈谈对ORM的理解</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#谈谈对restful的理解"><span class="nav-number">3.0.6.</span> <span class="nav-text">谈谈对restful的理解</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#中间件"><span class="nav-number">3.0.7.</span> <span class="nav-text">中间件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Django中的一些重要语句"><span class="nav-number">3.0.8.</span> <span class="nav-text">Django中的一些重要语句</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Django-查询的特性"><span class="nav-number">3.0.9.</span> <span class="nav-text">Django 查询的特性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#什么是wsgi、uwsgi、uWSGI"><span class="nav-number">3.0.10.</span> <span class="nav-text">什么是wsgi、uwsgi、uWSGI</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Django-中的csrf-（防止跨域请求伪造）实现机制"><span class="nav-number">3.0.11.</span> <span class="nav-text">Django 中的csrf （防止跨域请求伪造）实现机制</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Ajax"><span class="nav-number">3.0.12.</span> <span class="nav-text">Ajax</span></a></li></ol></li>
    
    </div>
  </aside>
</section>
        
      </div>

    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
</nav> -->
    <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2019 MapleStory All Rights Reserved.
        
            <span id="busuanzi_container_site_uv">
              本站访客数<span id="busuanzi_value_site_uv"></span>人次  
              本站总访问量<span id="busuanzi_value_site_pv"></span>次
            </span>
          
      </div>
      <div class="site-credit">
        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hipaper" target="_blank">hipaper</a>
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");

    wrapdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";


    <!-- headerblur min height -->
    
    
</script>
    
<div style="display: none;">
  <script src="https://s11.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
</div>

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
<script src="/js/bootstrap.js"></script>
<script src="/js/main.js"></script>







  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>



	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
	</script>






  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
